{% extends "Layouts/app.twig" %}
{% block content %}
    <div class="clearfix mb-2">
        <h2 class="float-start fs-2 me-2">Discussion</h2>
        {% if loggedIn %}
            <a class="btn btn-primary float-start" href="/discussion/post/create">New Post</a>
        {% else %}
            <a class="float-start pt-md-2" href="/user/account/login">Log in to post</a>
        {% endif %}
        <div class="float-end">{% include 'Partials/pagination.twig' with {url: "/discussion", page_count: page_count, current_page: current_page, page_number: page_number} %}</div>
    </div>
    {% for post in posts %}
        <div class="{% if loop.index != 1 %} pt-3 {% endif %} row {% if loop.index is even %} bg-light {% endif %}">
            <div class="col">
                {% include 'Partials/user-tag.twig' with {image: post.image, slug: post.slug, title: post.title, username: post.username, created_at: post.posts_created_at} %}
            </div>
        </div>
        <div class="row row-cols-1 pb-3 {% if (loop.index is even) %} bg-light {% endif %}">
            <div class="col">
                <p class="mb-0">{{ post.content|u.truncate(250, '...', false) }}</p>
            </div>
        </div>
    {% endfor %}
    <div class="float-end my-2">{% include 'Partials/pagination.twig' with {url: "/discussion", page_count: page_count, current_page: current_page, page_number: page_number} %}</div>
    <div class="clearfix"></div>
{% endblock %}